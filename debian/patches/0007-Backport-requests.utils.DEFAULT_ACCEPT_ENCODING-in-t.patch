From: Alexis Murzeau <amubtdx@gmail.com>
Date: Sun, 28 Nov 2021 22:41:19 +0100
Subject: Backport requests.utils.DEFAULT_ACCEPT_ENCODING in
 test_stream_json.py

DEFAULT_ACCEPT_ENCODING is not available in requests < 2.26.

Forwarded: not-needed
Author: Alexis Murzeau <amubtdx@gmail.com>
---
 tests/test_stream_json.py | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

diff --git a/tests/test_stream_json.py b/tests/test_stream_json.py
index 45913b3..a6151cd 100644
--- a/tests/test_stream_json.py
+++ b/tests/test_stream_json.py
@@ -1,13 +1,18 @@
 import unittest
 
-# noinspection PyUnresolvedReferences
-from requests.utils import DEFAULT_ACCEPT_ENCODING
+import re
+from urllib3.util import make_headers
 
 from streamlink import Streamlink
 from streamlink.stream.hls import HLSStream
 from streamlink.stream.http import HTTPStream
 from streamlink.stream.stream import Stream
 
+# Ensure that ', ' is used to preserve previous delimiter behavior.
+DEFAULT_ACCEPT_ENCODING = ", ".join(
+    re.split(r",\s*", make_headers(accept_encoding=True)["accept-encoding"])
+)
+
 
 class TestStreamToJSON(unittest.TestCase):
     def setUp(self):
